{"version":3,"sources":["Header.js","Card.js","Deck.js","ChosenCard.js","Room.js","App.js","index.js"],"names":["Header","className","Component","Card","this","props","id","handleMsg","onClick","hasChosen","style","border","cursor","backgroundColor","transition","color","fontSize","fontWeight","Deck","sequence","map","num","ChosenCard","username","reveal","classes","backgroundSize","backgroundPosition","flexDirection","lineHeight","Room","setCard","card","setState","yourCard","allCards","state","revealCards","ws","send","JSON","stringify","type","newGame","user","getUserFromCookie","hasUsername","revealing","count","users","addUser","handleUserChange","bind","handleUserSubmit","onmessage","event","console","log","cardData","parse","data","message","connection","to","countdown","userCookie","decodeURIComponent","document","cookie","split","find","p","includes","target","value","timer","setInterval","clearInterval","onSubmit","placeholder","onChange","length","host","App","W3CWebSocket","process","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.0e552530.chunk.js","sourcesContent":["import React, { Component } from \"react\";\n\nclass Header extends Component {\n  render() {\n    return (\n      <header className=\"flex flex-wrap justify-center bg-red py-4\">\n        <h1 className=\"text-white\">Megaport devs</h1>\n      </header>\n    );\n  }\n}\n\nexport default Header;\n","import React, { Component } from \"react\";\n\nclass Card extends Component {\n  render() {\n    const { id, handleMsg } = this.props;\n\n    const sendMsg = () => {\n      !this.props.hasChosen && id && handleMsg(id);\n    };\n\n    return (\n      <li\n        onClick={sendMsg}\n        className=\"Card relative rounded-lg h-20 shadow-md flex justify-center items-center mb-16 p-4 w-24 mx-2\"\n        style={{\n          border: \"3px solid #FF0000\",\n          cursor: \"pointer\",\n          backgroundColor:\n            this.props.hasChosen === id ? \"#FF0000\" : \"#FFF\",\n          transition: \"0.3s ease\",\n        }}\n      >\n        <h1\n          style={{\n            color: this.props.hasChosen === id ? \"#FFF\" : \"#FF0000\",\n            fontSize: \"36px\",\n            fontWeight: \"800\",\n          }}\n        >\n          {id}\n        </h1>\n      </li>\n    );\n  }\n}\n\nexport default Card;\n","import React, { Component } from \"react\";\nimport Card from \"./Card.js\";\n\nclass Deck extends Component {\n  constructor(props) {\n    super(props);\n    this.sequence = [1, 2, 3, 5, 8, 13, 21, 34, 55, 89];\n  }\n\n  render() {\n    const { handleMsg, hasChosen } = this.props;\n\n    return (\n      <ul className=\"flex flex-wrap justify-center\">\n        {this.sequence.map((num) => {\n          return (\n            <Card\n              id={num}\n              handleMsg={handleMsg}\n              key={num}\n              hasChosen={hasChosen}\n            />\n          );\n        })}\n      </ul>\n    );\n  }\n}\n\nexport default Deck;\n","import React, { Component } from \"react\";\n\nclass ChosenCard extends Component {\n  render() {\n    const { id, username, reveal } = this.props;\n    let classes =\n      \"relative rounded-lg h-36 shadow-md flex justify-center items-center mb-8 p-3 w-40 mx-2\";\n    classes += reveal ? \"\" : \" bg-red\";\n\n    return (\n      <div\n        className={classes}\n        style={{\n          backgroundSize: \"contain\",\n          backgroundPosition: \"center\",\n          flexDirection: \"column\",\n          border: \"3px solid #FF0000\",\n        }}\n      >\n        {reveal && (\n          <h1\n            style={{\n              color: reveal ? \"#FF0000\" : \"#F8F9FA\",\n              fontSize: \"60px\",\n              fontWeight: \"800\",\n              lineHeight: \"1\",\n            }}\n          >\n            {id}\n          </h1>\n        )}\n        <h3\n          style={{\n            color: reveal ? \"#FF0000\" : \"#F8F9FA\",\n            fontWeight: 700,\n          }}\n        >\n          {username}\n        </h3>\n      </div>\n    );\n  }\n}\n\nexport default ChosenCard;\n","import React, { Component } from \"react\";\nimport Deck from \"./Deck.js\";\nimport ChosenCard from \"./ChosenCard.js\";\n\nclass Room extends Component {\n  constructor(props) {\n    super(props);\n    const user = this.getUserFromCookie();\n\n    this.state = {\n      yourCard: null,\n      username: user,\n      hasUsername: user !== \"\",\n      hasChosen: null,\n      allCards: [],\n      revealCards: false,\n      revealing: false,\n      count: 3,\n      users: [],\n    };\n\n    if (user) {\n      this.addUser();\n    }\n\n    this.handleUserChange = this.handleUserChange.bind(this);\n    this.handleUserSubmit = this.handleUserSubmit.bind(this);\n\n    props.ws.onmessage = (event) => {\n      console.log(\"ws event: \", event);\n      const cardData = JSON.parse(event.data).message;\n      const newConnection =\n        JSON.parse(event.data).connection === \"ok\";\n\n      if (cardData?.type === \"cardChosen\") {\n        this.setCard(cardData);\n      } else if (cardData?.type === \"newUser\") {\n        this.setState({\n          users: [...this.state.users, cardData.username],\n        });\n        if (\n          this.state.users[0] === this.state.username &&\n          cardData.username !== this.state.username\n        ) {\n          props.ws.send(\n            JSON.stringify({\n              type: \"shareState\",\n              to: cardData.username,\n              state: {\n                allCards: this.state.allCards,\n                revealCards: this.state.revealCards,\n                revealing: this.state.revealing,\n                count: this.state.count,\n                users: this.state.users,\n              },\n            })\n          );\n        }\n      } else if (cardData?.type === \"reveal\") {\n        this.countdown();\n      } else if (cardData?.type === \"newGame\") {\n        this.setState({ yourCard: null });\n        this.setState({ hasChosen: null });\n        this.setState({ revealCards: false });\n        this.setState({ allCards: [] });\n      } else if (\n        cardData?.type === \"shareState\" &&\n        cardData?.to === this.state.username\n      ) {\n        this.setState({ allCards: cardData.state.allCards });\n        this.setState({ revealCards: cardData.state.revealCards });\n        this.setState({ revealing: cardData.state.revealing });\n        this.setState({ count: cardData.state.count });\n        this.setState({ users: cardData.state.users });\n      }\n    };\n  }\n\n  getUserFromCookie() {\n    let decodedCookie = decodeURIComponent(document.cookie);\n    let properties = decodedCookie.split(\";\");\n    const userCookie = properties.find((p) => p.includes(\"username\"));\n    return userCookie ? userCookie.split(\"=\")[1] : \"\";\n  }\n\n  setCard = (card) => {\n    this.setState({ yourCard: card });\n    this.setState({ allCards: [...this.state.allCards, card] });\n  };\n\n  revealCards = () => {\n    this.props.ws.send(\n      JSON.stringify({\n        type: \"reveal\",\n      })\n    );\n  };\n\n  newGame = () => {\n    this.props.ws.send(\n      JSON.stringify({\n        type: \"newGame\",\n      })\n    );\n  };\n\n  handleUserSubmit() {\n    this.setState({ hasUsername: true });\n    this.addUser();\n    document.cookie = `username=${this.state.username}`;\n  }\n\n  handleUserChange(event) {\n    this.setState({ username: event.target.value });\n  }\n\n  addUser() {\n    console.log(\"adding me as user\");\n    this.props.ws.send(\n      JSON.stringify({\n        type: \"newUser\",\n        username: this.state.username,\n      })\n    );\n  }\n\n  countdown() {\n    this.setState({ revealing: true });\n    const timer = setInterval(() => {\n      if (this.state.count === 1) {\n        this.setState({ revealing: false });\n        this.setState({ revealCards: true });\n        this.setState({ count: 4 });\n        clearInterval(timer);\n      }\n      this.setState({ count: this.state.count - 1 });\n    }, 1000);\n  }\n\n  render() {\n    const chooseCard = (id) => {\n      this.props.ws.send(\n        JSON.stringify({\n          type: \"cardChosen\",\n          id: id,\n          username: this.state.username,\n        })\n      );\n      this.setState({ hasChosen: id });\n    };\n\n    return (\n      <div className=\"p-8\">\n        {!this.state.hasUsername && (\n          <form\n            className=\"w-full flex justify-center\"\n            onSubmit={this.handleUserSubmit}\n          >\n            <div className=\"flex items-center justify-center border-b border-gray-300 py-2 max-w-sm\">\n              <input\n                className=\"bg-transparent border-none w-full text-gray-700 mr-3 py-1 px-2 leading-tight focus:outline-none\"\n                placeholder=\"Name\"\n                type=\"text\"\n                value={this.state.username}\n                onChange={this.handleUserChange}\n              />\n              <button\n                className=\"flex-shrink-0 bg-purple-500 hover:bg-purple-700 border-purple-500 hover:border-purple-700 text-sm border-4 text-white py-1 px-2 rounded\"\n                type=\"submit\"\n              >\n                Let me in\n              </button>\n            </div>\n          </form>\n        )}\n        {this.state.hasUsername && (\n          <div>\n            <div\n              className=\"flex h-80 justify-center items-center\"\n              style={{ flexDirection: \"column\" }}\n            >\n              <div className=\"flex justify-center items-center\">\n                {this.state.allCards.length === 0 && (\n                  <h1 className=\"center\">Someone make a move!</h1>\n                )}\n                {this.state.allCards.length > 0 &&\n                  this.state.allCards.map((card) => {\n                    return (\n                      <ChosenCard\n                        reveal={this.state.revealCards}\n                        id={card.id}\n                        username={card.username}\n                        key={card.id}\n                      />\n                    );\n                  })}\n              </div>\n              {!this.state.revealing &&\n                this.state.allCards.length > 0 && (\n                  <div className=\"h-16\">\n                    <button\n                      onClick={\n                        this.state.revealCards\n                          ? this.newGame\n                          : this.revealCards\n                      }\n                      className=\"shadow-md bg-purple-500 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded\"\n                    >\n                      {this.state.revealCards\n                        ? \"Play again?\"\n                        : \"Everybody's in!\"}\n                    </button>\n                  </div>\n                )}\n              {this.state.revealing && (\n                <div className=\"h-16\">\n                  <h1>{this.state.count}</h1>\n                </div>\n              )}\n            </div>\n            <Deck\n              handleMsg={chooseCard}\n              hasChosen={this.state.hasChosen}\n            />\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default Room;\n","import React, { Component } from \"react\";\nimport Header from \"./Header.js\";\nimport Room from \"./Room.js\";\nimport { w3cwebsocket as W3CWebSocket } from \"websocket\";\nimport \"./App.css\";\n\nconst host =\n  process.env.NODE_ENV === \"development\"\n    ? \"localhost\"\n    : \"megaport-tickets.herokuapp.com\";\n\nclass App extends Component {\n  ws = new W3CWebSocket(`wss://${host}`);\n\n  render() {\n    console.log(\"process.env: \", process.env);\n    return (\n      <div className=\"App\">\n        <Header />\n        <Room ws={this.ws} />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}