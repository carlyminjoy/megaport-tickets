{"version":3,"sources":["Header.js","Deck.js","ChosenCard.js","Room.js","App.js","index.js"],"names":["Header","className","Component","Deck","props","sequence","this","handleMsg","hasChosen","map","num","id","ChosenCard","username","reveal","classes","style","backgroundSize","backgroundPosition","flexDirection","border","color","fontSize","fontWeight","lineHeight","Room","setCard","card","setState","yourCard","allCards","state","revealCards","ws","send","JSON","stringify","type","newGame","user","getUserFromCookie","hasUsername","revealing","count","users","handleUserChange","bind","handleUserSubmit","onmessage","message","cardData","parse","data","to","countdown","userCookie","decodeURIComponent","document","cookie","split","find","p","includes","addUser","event","target","value","timer","setInterval","clearInterval","onSubmit","placeholder","onChange","length","onClick","App","W3CWebSocket","height","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.77a581ec.chunk.js","sourcesContent":["import React, { Component } from \"react\";\n\nclass Header extends Component {\n  render() {\n    return (\n      <header className=\"flex flex-wrap justify-center bg-red py-4\">\n        <h1 className=\"text-white\">Megaport devs</h1>\n      </header>\n    );\n  }\n}\n\nexport default Header;\n","import React, { Component } from \"react\";\nimport Card from \"./Deck.js\";\n\nclass Deck extends Component {\n  constructor(props) {\n    super(props);\n    this.sequence = [1, 2, 3, 5, 8, 13, 21, 34, 55, 89];\n  }\n\n  render() {\n    const { handleMsg, hasChosen } = this.props;\n\n    return (\n      <ul className=\"flex flex-wrap justify-center\">\n        {this.sequence.map((num) => {\n          return (\n            <Card\n              id={num}\n              handleMsg={handleMsg}\n              key={num}\n              hasChosen={hasChosen}\n            />\n          );\n        })}\n      </ul>\n    );\n  }\n}\n\nexport default Deck;\n","import React, { Component } from \"react\";\n\nclass ChosenCard extends Component {\n  render() {\n    const { id, username, reveal } = this.props;\n    let classes =\n      \"relative rounded-lg h-36 shadow-md flex justify-center items-center mb-8 p-3 w-40 mx-2\";\n    classes += reveal ? \"\" : \" bg-red\";\n\n    return (\n      <div\n        className={classes}\n        style={{\n          backgroundSize: \"contain\",\n          backgroundPosition: \"center\",\n          flexDirection: \"column\",\n          border: \"3px solid #FF0000\",\n        }}\n      >\n        {reveal && (\n          <h1\n            style={{\n              color: reveal ? \"#FF0000\" : \"#F8F9FA\",\n              fontSize: \"60px\",\n              fontWeight: \"800\",\n              lineHeight: \"1\",\n            }}\n          >\n            {id}\n          </h1>\n        )}\n        <h3\n          style={{\n            color: reveal ? \"#FF0000\" : \"#F8F9FA\",\n            fontWeight: 700,\n          }}\n        >\n          {username}\n        </h3>\n      </div>\n    );\n  }\n}\n\nexport default ChosenCard;\n","import React, { Component } from \"react\";\nimport Deck from \"./Deck.js\";\nimport ChosenCard from \"./ChosenCard.js\";\n\nclass Room extends Component {\n  constructor(props) {\n    super(props);\n    const user = this.getUserFromCookie();\n    this.state = {\n      yourCard: null,\n      username: user,\n      hasUsername: !!user,\n      hasChosen: null,\n      allCards: [],\n      revealCards: false,\n      revealing: false,\n      count: 3,\n      users: [],\n    };\n\n    this.handleUserChange = this.handleUserChange.bind(this);\n    this.handleUserSubmit = this.handleUserSubmit.bind(this);\n\n    props.ws.onmessage = (message) => {\n      const cardData = JSON.parse(message.data).message;\n      if (cardData?.type === \"cardChosen\") {\n        this.setCard(cardData);\n      } else if (cardData?.type === \"newUser\") {\n        this.setState({\n          users: [...this.state.users, cardData.username],\n        });\n        if (this.state.users[0] === this.state.username) {\n          props.ws.send(\n            JSON.stringify({\n              type: \"shareState\",\n              to: cardData.username,\n              state: {\n                allCards: [],\n                revealCards: false,\n                revealing: false,\n                count: 3,\n                users: [],\n              },\n            })\n          );\n        }\n      } else if (cardData?.type === \"reveal\") {\n        this.countdown();\n      } else if (cardData?.type === \"newGame\") {\n        this.setState({ yourCard: null });\n        this.setState({ hasChosen: null });\n        this.setState({ revealCards: false });\n        this.setState({ allCards: [] });\n      } else if (\n        cardData?.type === \"shareState\" &&\n        cardData?.to === this.state.username\n      ) {\n        this.setState({ allCards: cardData.state.allCards });\n        this.setState({ revealCards: cardData.state.revealCards });\n        this.setState({ revealing: cardData.state.revealing });\n        this.setState({ count: cardData.state.count });\n        this.setState({ users: cardData.state.users });\n      }\n    };\n  }\n\n  getUserFromCookie() {\n    let decodedCookie = decodeURIComponent(document.cookie);\n    let properties = decodedCookie.split(\";\");\n    const userCookie = properties.find((p) => p.includes(\"username\"));\n    return userCookie ? userCookie.split(\"=\")[1] : \"\";\n  }\n\n  setCard = (card) => {\n    this.setState({ yourCard: card });\n    this.setState({ allCards: [...this.state.allCards, card] });\n  };\n\n  revealCards = () => {\n    this.props.ws.send(\n      JSON.stringify({\n        type: \"reveal\",\n      })\n    );\n  };\n\n  newGame = () => {\n    this.props.ws.send(\n      JSON.stringify({\n        type: \"newGame\",\n      })\n    );\n  };\n\n  handleUserSubmit() {\n    this.setState({ hasUsername: true });\n    this.addUser();\n    document.cookie = `username=${this.state.username}`;\n  }\n\n  handleUserChange(event) {\n    this.setState({ username: event.target.value });\n  }\n\n  addUser() {\n    this.props.ws.send(\n      JSON.stringify({\n        type: \"newUser\",\n        username: this.state.username,\n      })\n    );\n  }\n\n  countdown() {\n    this.setState({ revealing: true });\n    const timer = setInterval(() => {\n      if (this.state.count === 1) {\n        this.setState({ revealing: false });\n        this.setState({ revealCards: true });\n        this.setState({ count: 4 });\n        clearInterval(timer);\n      }\n      this.setState({ count: this.state.count - 1 });\n    }, 1000);\n  }\n\n  render() {\n    const chooseCard = (id) => {\n      this.props.ws.send(\n        JSON.stringify({\n          type: \"cardChosen\",\n          id: id,\n          username: this.state.username,\n        })\n      );\n      this.setState({ hasChosen: id });\n    };\n\n    return (\n      <div className=\"p-8\">\n        {!this.state.hasUsername && (\n          <form\n            className=\"w-full flex justify-center\"\n            onSubmit={this.handleUserSubmit}\n          >\n            <div className=\"flex items-center justify-center border-b border-gray-300 py-2 max-w-sm\">\n              <input\n                className=\"bg-transparent border-none w-full text-gray-700 mr-3 py-1 px-2 leading-tight focus:outline-none\"\n                placeholder=\"Name\"\n                type=\"text\"\n                value={this.state.username}\n                onChange={this.handleUserChange}\n              />\n              <button\n                className=\"flex-shrink-0 bg-purple-500 hover:bg-purple-700 border-purple-500 hover:border-purple-700 text-sm border-4 text-white py-1 px-2 rounded\"\n                type=\"submit\"\n              >\n                Let me in\n              </button>\n            </div>\n          </form>\n        )}\n        {this.state.hasUsername && (\n          <div>\n            <div\n              className=\"flex h-80 justify-center items-center\"\n              style={{ flexDirection: \"column\" }}\n            >\n              <div className=\"flex justify-center items-center\">\n                {this.state.allCards.length === 0 && (\n                  <h1 className=\"center\">Someone make a move!</h1>\n                )}\n                {this.state.allCards.length > 0 &&\n                  this.state.allCards.map((card) => {\n                    return (\n                      <ChosenCard\n                        reveal={this.state.revealCards}\n                        id={card.id}\n                        username={card.username}\n                        key={card.id}\n                      />\n                    );\n                  })}\n              </div>\n              {!this.state.revealing &&\n                this.state.allCards.length > 0 && (\n                  <div className=\"h-16\">\n                    <button\n                      onClick={\n                        this.state.revealCards\n                          ? this.newGame\n                          : this.revealCards\n                      }\n                      className=\"bg-purple-500 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded\"\n                    >\n                      {this.state.revealCards\n                        ? \"Play again?\"\n                        : \"Everybody's in!\"}\n                    </button>\n                  </div>\n                )}\n              {this.state.revealing && (\n                <div className=\"h-16\">\n                  <h1>{this.state.count}</h1>\n                </div>\n              )}\n            </div>\n            <Deck\n              handleMsg={chooseCard}\n              hasChosen={this.state.hasChosen}\n            />\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default Room;\n","import React, { Component } from \"react\";\nimport Header from \"./Header.js\";\nimport Room from \"./Room.js\";\nimport { w3cwebsocket as W3CWebSocket } from \"websocket\";\nimport \"./App.css\";\n\nclass App extends Component {\n  ws = new W3CWebSocket(\"ws://localhost:5000\");\n\n  render() {\n    return (\n      <div className=\"App\" style={{ height: \"100vh\" }}>\n        <Header />\n        <Room ws={this.ws} />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}