(this["webpackJsonpmegaport-tickets"]=this["webpackJsonpmegaport-tickets"]||[]).push([[0],{15:function(e,t,s){},20:function(e,t,s){},21:function(e,t,s){"use strict";s.r(t);var a=s(1),n=s.n(a),r=s(9),i=s.n(r),o=(s(15),s(2)),c=s(3),l=s(5),u=s(4),d=s(0),h=function(e){Object(l.a)(s,e);var t=Object(u.a)(s);function s(){return Object(o.a)(this,s),t.apply(this,arguments)}return Object(c.a)(s,[{key:"render",value:function(){return Object(d.jsx)("header",{className:"flex flex-wrap justify-center bg-red py-4",children:Object(d.jsx)("h1",{className:"text-white",children:"Megaport devs"})})}}]),s}(a.Component),p=s(8),m=s(6),j=function(e){Object(l.a)(s,e);var t=Object(u.a)(s);function s(){return Object(o.a)(this,s),t.apply(this,arguments)}return Object(c.a)(s,[{key:"render",value:function(){var e=this,t=this.props,s=t.id,a=t.handleMsg;return Object(d.jsx)("li",{onClick:function(){!e.props.hasChosen&&s&&a(s)},className:"Card relative rounded-lg h-20 shadow-md flex justify-center items-center mb-16 p-4 w-24 mx-2",style:{border:"3px solid #FF0000",cursor:"pointer",backgroundColor:this.props.hasChosen===s?"#FF0000":"#FFF",transition:"0.3s ease"},children:Object(d.jsx)("h1",{style:{color:this.props.hasChosen===s?"#FFF":"#FF0000",fontSize:"36px",fontWeight:"800"},children:s})})}}]),s}(a.Component),b=function(e){Object(l.a)(s,e);var t=Object(u.a)(s);function s(e){var a;return Object(o.a)(this,s),(a=t.call(this,e)).sequence=[1,2,3,5,8,13,21,34,55,89],a}return Object(c.a)(s,[{key:"render",value:function(){var e=this.props,t=e.handleMsg,s=e.hasChosen;return Object(d.jsx)("ul",{className:"flex flex-wrap justify-center",children:this.sequence.map((function(e){return Object(d.jsx)(j,{id:e,handleMsg:t,hasChosen:s},e)}))})}}]),s}(a.Component),v=function(e){Object(l.a)(s,e);var t=Object(u.a)(s);function s(){return Object(o.a)(this,s),t.apply(this,arguments)}return Object(c.a)(s,[{key:"render",value:function(){var e=this.props,t=e.id,s=e.username,a=e.reveal,n="relative rounded-lg h-36 shadow-md flex justify-center items-center mb-8 p-3 w-40 mx-2";return n+=a?"":" bg-red",Object(d.jsxs)("div",{className:n,style:{backgroundSize:"contain",backgroundPosition:"center",flexDirection:"column",border:"3px solid #FF0000"},children:[a&&Object(d.jsx)("h1",{style:{color:a?"#FF0000":"#F8F9FA",fontSize:"60px",fontWeight:"800",lineHeight:"1"},children:t}),Object(d.jsx)("h3",{style:{color:a?"#FF0000":"#F8F9FA",fontWeight:700},children:s})]})}}]),s}(a.Component),f=function(e){Object(l.a)(s,e);var t=Object(u.a)(s);function s(e){var a;Object(o.a)(this,s),(a=t.call(this,e)).setCard=function(e){a.setState({yourCard:e}),a.setState({allCards:[].concat(Object(p.a)(a.state.allCards),[e])})},a.revealCards=function(){a.props.ws.send(JSON.stringify({type:"reveal"}))},a.newGame=function(){a.props.ws.send(JSON.stringify({type:"newGame"}))};var n=a.getUserFromCookie();return a.state={yourCard:null,username:n,hasUsername:""!==n,hasChosen:null,allCards:[],revealCards:!1,revealing:!1,count:3,users:[]},a.handleUserChange=a.handleUserChange.bind(Object(m.a)(a)),a.handleUserSubmit=a.handleUserSubmit.bind(Object(m.a)(a)),e.ws.onmessage=function(t){console.log("ws message: ",t);var s=JSON.parse(t.data).message;"cardChosen"===(null===s||void 0===s?void 0:s.type)?a.setCard(s):"newUser"===(null===s||void 0===s?void 0:s.type)?(a.setState({users:[].concat(Object(p.a)(a.state.users),[s.username])}),a.state.users[0]===a.state.username&&s.username!==a.state.username&&e.ws.send(JSON.stringify({type:"shareState",to:s.username,state:{allCards:[],revealCards:!1,revealing:!1,count:3,users:[]}}))):"reveal"===(null===s||void 0===s?void 0:s.type)?a.countdown():"newGame"===(null===s||void 0===s?void 0:s.type)?(a.setState({yourCard:null}),a.setState({hasChosen:null}),a.setState({revealCards:!1}),a.setState({allCards:[]})):"shareState"===(null===s||void 0===s?void 0:s.type)&&(null===s||void 0===s?void 0:s.to)===a.state.username&&(a.setState({allCards:s.state.allCards}),a.setState({revealCards:s.state.revealCards}),a.setState({revealing:s.state.revealing}),a.setState({count:s.state.count}),a.setState({users:s.state.users}))},a}return Object(c.a)(s,[{key:"getUserFromCookie",value:function(){var e=decodeURIComponent(document.cookie).split(";").find((function(e){return e.includes("username")}));return e?e.split("=")[1]:""}},{key:"handleUserSubmit",value:function(){console.log("1"),this.setState({hasUsername:!0}),console.log("2"),this.addUser(),document.cookie="username=".concat(this.state.username),console.log("3")}},{key:"handleUserChange",value:function(e){this.setState({username:e.target.value})}},{key:"addUser",value:function(){console.log("adding me as user"),this.props.ws.send(JSON.stringify({type:"newUser",username:this.state.username}))}},{key:"countdown",value:function(){var e=this;this.setState({revealing:!0});var t=setInterval((function(){1===e.state.count&&(e.setState({revealing:!1}),e.setState({revealCards:!0}),e.setState({count:4}),clearInterval(t)),e.setState({count:e.state.count-1})}),1e3)}},{key:"render",value:function(){var e=this;return Object(d.jsxs)("div",{className:"p-8",children:[!this.state.hasUsername&&Object(d.jsx)("form",{className:"w-full flex justify-center",onSubmit:this.handleUserSubmit,children:Object(d.jsxs)("div",{className:"flex items-center justify-center border-b border-gray-300 py-2 max-w-sm",children:[Object(d.jsx)("input",{className:"bg-transparent border-none w-full text-gray-700 mr-3 py-1 px-2 leading-tight focus:outline-none",placeholder:"Name",type:"text",value:this.state.username,onChange:this.handleUserChange}),Object(d.jsx)("button",{className:"flex-shrink-0 bg-purple-500 hover:bg-purple-700 border-purple-500 hover:border-purple-700 text-sm border-4 text-white py-1 px-2 rounded",type:"submit",children:"Let me in"})]})}),this.state.hasUsername&&Object(d.jsxs)("div",{children:[Object(d.jsxs)("div",{className:"flex h-80 justify-center items-center",style:{flexDirection:"column"},children:[Object(d.jsxs)("div",{className:"flex justify-center items-center",children:[0===this.state.allCards.length&&Object(d.jsx)("h1",{className:"center",children:"Someone make a move!"}),this.state.allCards.length>0&&this.state.allCards.map((function(t){return Object(d.jsx)(v,{reveal:e.state.revealCards,id:t.id,username:t.username},t.id)}))]}),!this.state.revealing&&this.state.allCards.length>0&&Object(d.jsx)("div",{className:"h-16",children:Object(d.jsx)("button",{onClick:this.state.revealCards?this.newGame:this.revealCards,className:"bg-purple-500 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded",children:this.state.revealCards?"Play again?":"Everybody's in!"})}),this.state.revealing&&Object(d.jsx)("div",{className:"h-16",children:Object(d.jsx)("h1",{children:this.state.count})})]}),Object(d.jsx)(b,{handleMsg:function(t){e.props.ws.send(JSON.stringify({type:"cardChosen",id:t,username:e.state.username})),e.setState({hasChosen:t})},hasChosen:this.state.hasChosen})]})]})}}]),s}(a.Component),O=s(10),g=(s(20),"megaport-tickets.herokuapp.com"),y=function(e){Object(l.a)(s,e);var t=Object(u.a)(s);function s(){var e;Object(o.a)(this,s);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).ws=new O.w3cwebsocket("ws://".concat(g,":5000")),e}return Object(c.a)(s,[{key:"render",value:function(){return console.log("process.env: ",Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})),Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)(h,{}),Object(d.jsx)(f,{ws:this.ws})]})}}]),s}(a.Component);i.a.render(Object(d.jsx)(n.a.StrictMode,{children:Object(d.jsx)(y,{})}),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.c1fc66bb.chunk.js.map