(this["webpackJsonpmegaport-tickets"]=this["webpackJsonpmegaport-tickets"]||[]).push([[0],{15:function(e,t,s){},20:function(e,t,s){},21:function(e,t,s){"use strict";s.r(t);var a=s(1),n=s.n(a),r=s(9),c=s.n(r),l=(s(15),s(2)),i=s(3),o=s(5),d=s(4),h=s(0),u=function(e){Object(o.a)(s,e);var t=Object(d.a)(s);function s(){return Object(l.a)(this,s),t.apply(this,arguments)}return Object(i.a)(s,[{key:"render",value:function(){return Object(h.jsx)("header",{className:"bg-red p-4 shadow-md",children:Object(h.jsxs)("div",{className:"flex flex-wrap items-center",style:{maxWidth:"1200px",width:"100%",margin:"0 auto"},children:[Object(h.jsxs)("svg",{style:{height:"40px",width:"auto"},className:"mr-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[Object(h.jsx)("path",{fill:"#FFFFFF",d:"M12,24C5.383,24,0,18.617,0,12S5.383,0,12,0s12,5.383,12,12S18.617,24,12,24z M12,1C5.935,1,1,5.935,1,12s4.935,11,11,11s11-4.935,11-11S18.065,1,12,1z M17.521,21.106c-0.104,0-0.209-0.032-0.297-0.098l-1.208-0.892c-0.128-0.095-0.203-0.243-0.203-0.402v-2.828l-1.051-1.05l-1.051,1.05v2.828c0,0.159-0.075,0.309-0.203,0.402l-1.211,0.892c-0.178,0.131-0.416,0.131-0.594,0l-1.211-0.892c-0.128-0.094-0.203-0.243-0.203-0.402v-2.828l-1.051-1.05l-1.051,1.05v2.828c0,0.159-0.075,0.309-0.203,0.402l-1.209,0.892c-0.176,0.131-0.418,0.131-0.594,0l-1.208-0.892c-0.128-0.095-0.203-0.243-0.203-0.402v-4.036c0-0.133,0.053-0.26,0.146-0.354l2.611-2.611V8.848c0-0.133,0.053-0.26,0.146-0.354l2.612-2.613v-3.3c0-0.159,0.075-0.309,0.203-0.402L11.7,1.288c0.178-0.131,0.416-0.131,0.594,0l1.209,0.891c0.128,0.094,0.203,0.243,0.203,0.402v3.301l2.612,2.613c0.094,0.094,0.146,0.221,0.146,0.354l-0.002,3.856l2.62,2.62c0.094,0.094,0.146,0.221,0.146,0.354v4.036c0,0.159-0.075,0.308-0.203,0.402l-1.208,0.892C17.73,21.074,17.626,21.106,17.521,21.106z M11.29,19.462l0.711,0.523l0.711-0.523V16.68c0-0.133,0.053-0.26,0.146-0.354l1.551-1.55c0.195-0.195,0.512-0.195,0.707,0l1.551,1.55c0.094,0.094,0.146,0.221,0.146,0.354v2.783l0.708,0.522l0.708-0.522v-3.577l-2.62-2.62c-0.094-0.094-0.146-0.221-0.146-0.354l0.002-3.856l-2.612-2.613c-0.094-0.094-0.146-0.221-0.146-0.354V2.834l-0.709-0.522l-0.709,0.522v3.254c0,0.133-0.053,0.26-0.146,0.354L8.529,9.055v3.866c0,0.133-0.053,0.26-0.146,0.354l-2.611,2.611v3.577l0.708,0.522l0.709-0.523V16.68c0-0.133,0.053-0.26,0.146-0.354l1.551-1.55c0.195-0.195,0.512-0.195,0.707,0l1.551,1.55c0.094,0.094,0.146,0.221,0.146,0.354V19.462z"}),Object(h.jsx)("path",{fill:"#FFFFFF",d:"M12,14.973c-0.128,0-0.256-0.049-0.354-0.146l-1.555-1.555c-0.094-0.094-0.146-0.221-0.146-0.354V9.849c0-0.133,0.053-0.26,0.146-0.354l1.55-1.551c0.188-0.188,0.52-0.188,0.707,0l1.551,1.551c0.094,0.094,0.146,0.221,0.146,0.354v3.079c0,0.133-0.053,0.26-0.146,0.354l-1.546,1.545C12.256,14.924,12.128,14.973,12,14.973z M10.945,12.711L12,13.766l1.046-1.045v-2.665l-1.051-1.051l-1.05,1.051V12.711z M13.546,12.928h0.01H13.546z"})]}),Object(h.jsxs)("div",{style:{marginBottom:"4px"},children:[Object(h.jsx)("h1",{className:"text-white",style:{fontWeight:"700"},children:"megaport front-end devs"}),Object(h.jsx)("h5",{className:"text-white",style:{fontSize:".75rem"},children:"TICKET GROOMING"})]})]})})}}]),s}(a.Component),m=s(8),p=s(6),v=function(e){Object(o.a)(s,e);var t=Object(d.a)(s);function s(){var e;Object(l.a)(this,s);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).sendMsg=function(){!e.props.cardsRevealed&&e.props.id&&e.props.handleMsg(e.props.id)},e}return Object(i.a)(s,[{key:"render",value:function(){var e=this.props,t=e.id,s=e.cardsRevealed,a=this.props.hasChosen===t;return Object(h.jsx)("li",{onClick:this.sendMsg,className:"Card relative rounded-lg h-20 shadow-md flex justify-center items-center mb-16 p-4 w-24 mx-2 ".concat(!s&&!a&&"hover-effects"),style:{border:"3px solid rgba(255, 0, 0, 1)",cursor:"pointer",backgroundColor:a?"rgb(255, 0, 0)":"#FFF",transition:"0.3s ease",transform:a?"scale(1.1)":""},children:Object(h.jsx)("h1",{style:{color:a?"#FFF":"#FF0000",fontSize:"36px",fontWeight:"800"},children:t})})}}]),s}(a.Component),j=function(e){Object(o.a)(s,e);var t=Object(d.a)(s);function s(e){var a;return Object(l.a)(this,s),(a=t.call(this,e)).sequence=[1,2,3,5,8,13,21,34,55,89],a}return Object(i.a)(s,[{key:"render",value:function(){var e=this.props,t=e.handleMsg,s=e.hasChosen,a=e.cardsRevealed;return Object(h.jsx)("ul",{className:"flex flex-wrap justify-center",children:this.sequence.map((function(e){return Object(h.jsx)(v,{id:e,handleMsg:t,hasChosen:s,cardsRevealed:a},e)}))})}}]),s}(a.Component),b=function(e){Object(o.a)(s,e);var t=Object(d.a)(s);function s(){return Object(l.a)(this,s),t.apply(this,arguments)}return Object(i.a)(s,[{key:"render",value:function(){var e=this.props,t=e.id,s=e.username,a=e.reveal,n="relative rounded-lg h-36 shadow-md flex justify-center items-center mb-8 p-3 w-40 mx-2";return n+=a?"":" bg-red",Object(h.jsxs)("div",{className:n,style:{backgroundSize:"contain",backgroundPosition:"center",flexDirection:"column",border:"3px solid #FF0000"},children:[Object(h.jsx)("h1",{style:{color:a?"#FF0000":"#F8F9FA",fontSize:"60px",fontWeight:"800",lineHeight:"1",transition:"1s ease"},children:a?t:"?"}),Object(h.jsx)("h3",{style:{color:a?"#FF0000":"#F8F9FA",fontWeight:700,transition:"1s ease"},children:s})]})}}]),s}(a.Component),f=function(e){Object(o.a)(s,e);var t=Object(d.a)(s);function s(e){var a;Object(l.a)(this,s),(a=t.call(this,e)).setupSocketEvents=function(){a.props.ws.onmessage=function(e){var t=JSON.parse(e.data),s={connected:a.addUser,reveal:a.countdown,newGame:a.setupNewGame,newUser:a.handleNewUser,cardChosen:a.setCard,shareState:a.shareState};console.log("eventData: ",t),s[t.type](t)}},a.shareState=function(e){a.setState({allCards:e.state.allCards}),a.setState({revealCards:e.state.revealCards}),a.setState({revealing:e.state.revealing}),a.setState({count:e.state.count}),a.setState({users:e.state.users})},a.setupNewGame=function(){a.setState({hasChosen:null}),a.setState({revealCards:!1}),a.setState({allCards:[]})},a.handleNewUser=function(e){a.setState({users:[].concat(Object(m.a)(a.state.users),[e.username])}),e.username!==a.state.username&&a.props.ws.send(JSON.stringify({type:"shareState",to:e.username,state:{allCards:a.state.allCards,revealCards:a.state.revealCards,revealing:a.state.revealing,count:a.state.count,users:a.state.users}}))},a.getUserFromCookie=function(){var e=decodeURIComponent(document.cookie).split(";").find((function(e){return e.includes("username")}));return e?e.split("=")[1]:""},a.setCard=function(e){var t=!1;a.state.allCards.forEach((function(s,n){if(s.username===e.username){var r=a.state.allCards;r[n]=e,a.setState({allCards:r}),t=!0}})),t||a.setState({allCards:[].concat(Object(m.a)(a.state.allCards),[e])})},a.revealCards=function(){a.props.ws.send(JSON.stringify({type:"reveal"}))},a.newGame=function(){a.props.ws.send(JSON.stringify({type:"newGame"}))},a.handleUserSubmit=function(){a.setState({hasUsername:!0}),a.addUser(),document.cookie="username=".concat(a.state.username)},a.handleUserChange=function(e){a.setState({username:e.target.value})},a.addUser=function(){var e;(null===(e=a.state)||void 0===e?void 0:e.username)&&a.props.ws.send(JSON.stringify({type:"newUser",username:a.state.username}))},a.countdown=function(){a.setState({revealing:!0});var e=setInterval((function(){1===a.state.count&&(a.setState({revealing:!1}),a.setState({revealCards:!0}),a.setState({count:4}),clearInterval(e)),a.setState({count:a.state.count-1})}),1e3)},a.chooseCard=function(e){a.props.ws.send(JSON.stringify({type:"cardChosen",id:e,username:a.state.username})),a.setState({hasChosen:e})};var n=a.getUserFromCookie();return a.state={username:n,hasUsername:""!==n,hasChosen:null,allCards:[],revealCards:!1,revealing:!1,count:3,users:[]},a.handleUserChange=a.handleUserChange.bind(Object(p.a)(a)),a.handleUserSubmit=a.handleUserSubmit.bind(Object(p.a)(a)),a.setupSocketEvents(),a}return Object(i.a)(s,[{key:"render",value:function(){var e=this,t=Object(h.jsx)("form",{className:"w-full flex justify-center",onSubmit:this.handleUserSubmit,children:Object(h.jsxs)("div",{className:"flex items-center justify-center border-b border-gray-300 py-2 max-w-sm",children:[Object(h.jsx)("input",{className:"bg-transparent border-none w-full text-gray-700 mr-3 py-1 px-2 leading-tight focus:outline-none",placeholder:"Name",type:"text",value:this.state.username,onChange:this.handleUserChange}),Object(h.jsx)("button",{className:"shadow-md bg-purple-500 border-purple-500 border-4 text-white py-1 px-2 rounded",type:"submit",children:"Let me in"})]})}),s=Object(h.jsx)("div",{className:"h-16",children:Object(h.jsx)("button",{onClick:this.state.revealCards?this.newGame:this.revealCards,className:"shadow-md bg-purple-500 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded",children:this.state.revealCards?"Go again":"Everybody's in"})});return Object(h.jsxs)("div",{className:"p-4",style:{maxWidth:"1200px",width:"100%",margin:"0 auto"},children:[!this.state.hasUsername&&t,this.state.hasUsername&&Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{className:"flex h-80 justify-center items-center",style:{flexDirection:"column"},children:[Object(h.jsxs)("div",{className:"flex justify-center items-center",children:[0===this.state.allCards.length&&Object(h.jsx)("h1",{className:"center",children:"Pick a card"}),this.state.allCards.length>0&&this.state.allCards.map((function(t){return Object(h.jsx)(b,{reveal:e.state.revealCards,id:t.id,username:t.username},t.id)}))]}),!this.state.revealing&&this.state.allCards.length>0&&s,this.state.revealing&&Object(h.jsx)("div",{className:"h-16",children:Object(h.jsx)("h1",{style:{color:"#6500d1",fontWeight:"700",fontSize:"2rem"},children:this.state.count})})]}),Object(h.jsx)(j,{cardsRevealed:this.state.revealCards,handleMsg:this.chooseCard,hasChosen:this.state.hasChosen})]})]})}}]),s}(a.Component),O=s(10),g=(s(20),"wss://megaport-tickets.herokuapp.com"),x=function(e){Object(o.a)(s,e);var t=Object(d.a)(s);function s(){var e;Object(l.a)(this,s);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).ws=new O.w3cwebsocket(g),e}return Object(i.a)(s,[{key:"render",value:function(){return console.log("process.env: ",Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})),Object(h.jsxs)("div",{className:"App",children:[Object(h.jsx)(u,{}),Object(h.jsx)(f,{ws:this.ws})]})}}]),s}(a.Component);c.a.render(Object(h.jsx)(n.a.StrictMode,{children:Object(h.jsx)(x,{})}),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.cc7f3bce.chunk.js.map